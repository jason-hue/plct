# LicheePi 4A RuyiSDK 环境部署口播稿 

最近刚拿到一块新的 LicheePi 4A 开发板，
 国产 RISC-V 平台里的小钢炮，真的是忍不住想上手体验一下。

这次我用的是RuyiSDK，全程下来体验感觉挺顺的。
 从环境搭建，到系统烧录，再到 RISC-V 程序的编译，
 基本上是一条龙搞定，流程很清晰。

那这期视频呢，就来带大家一起体验一下RuyiSDK。

首先我们来安装一下RuyiSDK的包管理器。
 目前RuyiSDK只支持 Linux 系统，
 所以我这边用的是 WSL 来部署环境。

我的电脑是 x86_64 架构，
 所以需要下载 amd64 架构的预编译包。
 如果你不清楚自己电脑的架构，
 可以输入这条命令查一下：

```bash
uname -m
```

然后根据输出去下载对应的预编译包就可以了。

下载好之后，先给它加上可执行权限，
 再把它安装到 `$PATH` 包含的目录里。

接下来用下面这个命令来验证是否安装成功：

```bash
ruyi --version
```

正常情况下应该会看到版本号和版权信息。
 如果执行失败了，那就检查一下系统环境，或者重新安装一下试试。

接着我们来看下如何管理Ruyi的软件包。
 运行下面这条命令，就可以从远程软件源获取内容，
 并刷新本地的软件包缓存：

```bash
ruyi update
```

默认使用的是托管在 GitHub 上的镜像，
 如果出现访问不稳定的情况，
 可以使用 `ruyi config` 命令来切换备用仓库，
 也可以加个代理来解决。

添加代理的方式可以参考官方文档。

另外我们还能运行 `ruyi news list` 来查看最近的新闻，
 比如说输入下面的命令就可以阅读第11条新闻：

```bash
ruyi news read 11
```

接下来看看怎么安装软件包，
 比如说我们想装一个 GNU 上游的 GCC 工具链：

```bash
ruyi install gcc-upstream
ruyi install toolchain/gnu-upstream
```

Ruyi 不仅是个包管理器，
 它还对工具链、模拟器、镜像这些都做了很好的集成。

Ruyi 的软件源中已经提供了一些预置的配置，
 使用起来非常方便，连安装都省了。

比如我的开发板是 LicheePi 4A，
 那我们就可以创建一个它的预置虚拟环境。

不过这里提示我没有安装相关的工具链，
 那我们先查询一下它的信息，
 直接下载最新版就行。

下载好之后，再重新创建虚拟环境。
 提示创建成功，接下来我们来跑一个实际的例子试试。

首先安装这个示例需要的软件包，
 这时候提示我们缺少 zstd 软件包，
 那就安装一下它：

```bash
sudo apt install zstd
```

安装好之后，再次运行命令就没问题了。

我们新建一个干净的目录用来运行这个示例程序，
 然后获取 demo 的源码，
 再建立虚拟环境，并激活它。

激活之后，`$PATH` 也已经被更新，
 现在可以直接调用工具链了。

我们来编译一下 demo，
 很快就能看到编译成功了，是不是很方便？

使用完虚拟环境后，退出编译环境，
 所有东西都会恢复到原来的状态。

Ruyi 的镜像集成也非常方便，
 提供了开发板镜像刷写和单片机设备文档的支持。

比如说我们想给 LicheePi 4A 刷写 RevyOS，
 只需要输入序号18，
 然后根据提示选择自己的开发板配置，
 选最新版即可，继续选择下一步。

因为我的开发板已经刷过系统了，
 所以就不再演示刷写的过程了。

那这期视频就到这了，
 下期我们来看看更具体的使用案例，我们下期见！